'use strict'

const t = require('tap')
const test = t.test
const FindMyWay = require('..')

test('Matching order', t => {
  t.plan(3)
  const findMyWay = FindMyWay()

  findMyWay.on('GET', '/bar/bar/static', { constraints: { host: 'test' } }, () => {})
  findMyWay.on('GET', '/bar/bar/*', () => {})
  findMyWay.on('GET', '/bar/:param/static', () => {})

  t.same(findMyWay.find('GET', '/bar/bar/static', { host: 'test' }).params, {})
  t.same(findMyWay.find('GET', '/bar/bar/static').params, { '*': 'static' })
  t.same(findMyWay.find('GET', '/bar/value/static').params, { param: 'value' })
})
